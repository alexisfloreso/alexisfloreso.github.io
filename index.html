<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargar CSV y Mostrar Datos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilos para los nombres */
        .nombre-item {
            cursor: pointer;
            font-weight: bold;
            text-align: center;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: opacity 0.3s ease-in-out;
        }
        .nombre-item:hover {
            opacity: 0.8;
        }
        /* Clases de color alternadas */
        .bg-custom-1 { background-color: #007bff; } /* Azul */
        .bg-custom-2 { background-color: #28a745; } /* Verde */
        .bg-custom-3 { background-color: #ffc107; } /* Amarillo */
        .bg-custom-4 { background-color: #dc3545; } /* Rojo */
        .bg-custom-5 { background-color: #17a2b8; } /* Celeste */

        /* Estilos de la tabla */
        .table-container {
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
        }

        /* Estilos para el modal */
        .modal-header {
            background: #343a40;
            color: white;
        }
        
                /* Ocultar elementos cuando no coinciden con la búsqueda */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body class="container mt-4">

    <h2 class="text-center mb-3">Cargar Archivo CSV</h2>

    <div class="mb-3">
        <input type="file" id="csvFile" accept=".csv" class="form-control">
    </div>

    <!-- Buscador -->
    <input type="text" id="searchInput" class="form-control mb-3" placeholder="Buscar por nombre..." onkeyup="filterNames()">

    <div class="row shadow-lg p-3 rounded table-container" id="table-container"></div>

    <!-- Modal -->
    <div class="modal fade" id="dataModal" tabindex="-1" aria-labelledby="dataModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="dataModalLabel">Detalles del Registro</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body table-responsive">
                    <table class="table table-striped table-hover">
                        <tbody id="modalContent"></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('csvFile').addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                const lines = e.target.result.split('\n').slice(1); // Omitir encabezados
                const data = lines.map(line => line.split(',')).filter(row => row.length === 5);

                if (data.length < 50) {
                    alert('El archivo debe tener al menos 50 registros.');
                    return;
                }

                renderTable(data);
            };
            reader.readAsText(file);
        });

        function renderTable(data) {
            const tableContainer = document.getElementById('table-container');
            tableContainer.innerHTML = ''; // Limpiar contenido previo

            let col1 = '<div class="col-md-6"><ul class="list-group">';
            let col2 = '<div class="col-md-6"><ul class="list-group">';

            data.slice(0, 25).forEach((row, index) => {
                col1 += `<li class="list-group-item list-group-item-action" onclick="showDetails(${index})">${row[0]}</li>`;
            });

            data.slice(25, 50).forEach((row, index) => {
                col2 += `<li class="list-group-item list-group-item-action" onclick="showDetails(${index + 25})">${row[0]}</li>`;
            });

            col1 += '</ul></div>';
            col2 += '</ul></div>';

            tableContainer.innerHTML = col1 + col2;
            window.csvData = data; // Guardar datos en variable global
        }

        function showDetails(index) {
            const record = window.csvData[index];
            const content = `
                <p><strong>Nombre:</strong> ${record[0]}</p>
                <p><strong>Edad:</strong> ${record[1]}</p>
                <p><strong>Sexo:</strong> ${record[2]}</p>
                <p><strong>Ocupación:</strong> ${record[3]}</p>
                <p><strong>Nivel de Estudios:</strong> ${record[4]}</p>
            `;
            document.getElementById('modalContent').innerHTML = content;
            new bootstrap.Modal(document.getElementById('dataModal')).show();
        }
        
        function filterNames() {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const container = document.getElementById('table-container');
            const names = container.getElementsByClassName('nombre-item');

            Array.from(names).forEach(name => {
                const text = name.textContent.toLowerCase();
                name.style.display = text.includes(searchValue) ? '' : 'none';
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>